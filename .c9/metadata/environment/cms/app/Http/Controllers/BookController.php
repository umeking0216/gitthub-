{"filter":false,"title":"BookController.php","tooltip":"/cms/app/Http/Controllers/BookController.php","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":16,"column":8},"end":{"row":16,"column":10},"action":"remove","lines":["//"],"id":2},{"start":{"row":16,"column":8},"end":{"row":16,"column":34},"action":"insert","lines":["return view('books'); //追記"]}],[{"start":{"row":5,"column":28},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":6,"column":0},"end":{"row":6,"column":14},"action":"insert","lines":["use Validator;"],"id":4}],[{"start":{"row":38,"column":8},"end":{"row":38,"column":10},"action":"remove","lines":["//"],"id":5},{"start":{"row":38,"column":8},"end":{"row":61,"column":24},"action":"insert","lines":[" //バリデーション","    $validator = Validator::make($request->all(), [","         'item_name' => 'required|min:3|max:255',","         'item_number' => 'required|min:1|max:3',","         'item_amount' => 'required|max:6',","         'published'   => 'required',","    ]);","","    //バリデーション:エラー ","    if ($validator->fails()) {","        return redirect('/')","            ->withInput()","            ->withErrors($validator);","    }","","    //以下に登録処理を記述（Eloquentモデル）","\t  // Eloquentモデル","\t  $books = new Book;","\t  $books->item_name   = $request->item_name;","\t  $books->item_number = $request->item_number;","\t  $books->item_amount = $request->item_amount;","\t  $books->published   = $request->published;","\t  $books->save(); ","\t  return redirect('/');"]}],[{"start":{"row":17,"column":7},"end":{"row":17,"column":34},"action":"remove","lines":[" return view('books'); //追記"],"id":6},{"start":{"row":17,"column":7},"end":{"row":20,"column":46},"action":"insert","lines":["\t//本の全件データ取得","    $books = Book::orderBy('created_at', 'asc')->get();","","    return view('books', ['books' => $books]);"]}],[{"start":{"row":109,"column":7},"end":{"row":109,"column":10},"action":"remove","lines":[" //"],"id":7},{"start":{"row":109,"column":7},"end":{"row":110,"column":31},"action":"insert","lines":["$book->delete();       //追加","    return redirect('/');  //追加"]}],[{"start":{"row":86,"column":8},"end":{"row":86,"column":10},"action":"remove","lines":["//"],"id":8},{"start":{"row":86,"column":8},"end":{"row":86,"column":53},"action":"insert","lines":[" return view('booksedit', ['book' => $book]);"]}],[{"start":{"row":98,"column":8},"end":{"row":98,"column":10},"action":"remove","lines":["//"],"id":9},{"start":{"row":98,"column":8},"end":{"row":120,"column":29},"action":"insert","lines":["//バリデーション","         $validator = Validator::make($request->all(), [","             'id' => 'required',","             'item_name' => 'required|min:3|max:255',","             'item_number' => 'required|min:1|max:3',","             'item_amount' => 'required|max:6',","             'published' => 'required',","        ]);","        //バリデーション:エラー","         if ($validator->fails()) {","             return redirect('/booksedit/'.$request->id)","                 ->withInput()","                 ->withErrors($validator);","        }","        ","        //データ更新","        $books = Book::find($request->id);","        $books->item_name   = $request->item_name;","        $books->item_number = $request->item_number;","        $books->item_amount = $request->item_amount;","        $books->published   = $request->published;","        $books->save();","        return redirect('/');"]}],[{"start":{"row":17,"column":5},"end":{"row":20,"column":46},"action":"remove","lines":["  \t//本の全件データ取得","    $books = Book::orderBy('created_at', 'asc')->get();","","    return view('books', ['books' => $books]);"],"id":10},{"start":{"row":17,"column":5},"end":{"row":20,"column":11},"action":"insert","lines":["  $books = Book::orderBy('created_at', 'asc')->paginate(3);","        return view('books', [","            'books' => $books","        ]);"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":21,"column":5},"end":{"row":21,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":56,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1675872900832,"hash":"ee265ed4451d243ea83a3bcb779de967abb20d82"}